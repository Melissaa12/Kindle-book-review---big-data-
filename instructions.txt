#set up a fresh aws of ami-id: ami-0f82752aa17ff8f5d#
ssh ubuntu@publicip -i <keypempath>
sudo apt-get update
sudo apt-get install git
git clone https://dbgroup202020:dbprojectpassword@github.com/ryangen97/DBProject.git 
cd DBProject
cd SQLWITHPROFINS
sh dependencies.sh
 . venv/bin/activate
sh createEC2.sh

#Enter Credentials#


#To delete whole stack:#
source /etc/environment
 . venv/bin/activate
python3 deletestack.py $ACCESS_KEY_ID $AWS_SECRET_ACCESS_KEY $AWS_SESSION_TOKEN $REGION 'newawskey'


##### TEARDOWN #####


#to update stack(number of nodes)#
python3 updatestack.py <numberofdatanodesotherthanslave0> $ACCESS_KEY_ID $AWS_SECRET_ACCESS_KEY $AWS_SESSION_TOKEN $REGION

#To only shutdown the hadoop cluster#
sh shutdownhadoopcluster.sh $MASTERIP

#If it doesnt work check the aws coordinates if they have expired#
#if yes reenter your aws coordinates like this#

 1)sh updateawscredentials.sh 
 2)enter your updated credentials
 3)source /etc/environment

#note: when exiting flaskserver with ctrl c make sure to clear port connection before reattempting connection with# 
fuser -k 3306/tcp